<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BGB Token Airdrop</title>
  <link rel="icon" href="logo.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }

    :root{
      --accent:#e60000;
      --accent-2:#cc0000;
      --text:#ffffff;
      --muted:#9aa0a6;
      --gold:#FFD700;
      --ok:#00ff88;
      --surface:rgba(255,255,255,.15);
      --surface-gold:rgba(255,215,0,.15);
    }

    body, html {
      height:100%;
      font-family:'Orbitron', sans-serif;
      background:url('photo_2_2025-08-05_23-57-02.jpg') no-repeat center center fixed;
      background-size:cover;
    }

    .overlay{
      background-color:rgba(0,0,0,0.75);
      height:100%; width:100%;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; padding:30px; gap:14px;
    }

    .container{ max-width: 900px; width:100%; margin:0 auto; }

    h1{
      font-size:64px; line-height:1.05;
      background:linear-gradient(to right, red, orange);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom:12px;
    }

    p{ font-size:24px; color:var(--text); margin-bottom:16px; }

    .buttons{ display:flex; flex-wrap:wrap; justify-content:center; }
    .buttons a, .buttons button{
      text-decoration:none; display:inline-block; margin:10px; padding:15px 28px;
      background:var(--accent); border-radius:12px; color:#fff; font-weight:bold; font-size:18px;
      box-shadow:0 0 10px var(--accent); transition:.25s ease-in-out; border:none; cursor:pointer;
    }
    .buttons a:hover, .buttons button:hover{ background:var(--accent-2); transform:translateY(-1px) scale(1.02); }

    .contract{ background:var(--surface); color:#fff; margin:18px auto 0; padding:15px 20px;
      border-radius:12px; font-size:16px; display:inline-flex; align-items:center; gap:12px; }
    .contract code{ font-size:15px; user-select:all; }
    .contract button{ background:transparent; border:1px dashed #fff3; color:#fff; padding:8px 12px; border-radius:10px; cursor:pointer; }
    .contract button:hover{ background:#fff1; }

    .lock-info{
      margin-top:18px; padding:15px 20px; background:var(--surface-gold);
      border-radius:12px; color:var(--gold); font-size:18px; display:inline-block;
    }
    .timer{ font-size:22px; font-weight:700; color:var(--ok); margin-top:10px; }
    .hint { margin-top:6px; font-size:12px; color:var(--muted); }

    footer{ margin-top:24px; color:#ccc; font-size:14px; }

    /* Toasts */
    .toast-wrap{ position:fixed; right:20px; bottom:20px; display:flex; flex-direction:column; gap:10px; z-index:9999; }
    .toast{ min-width:260px; max-width:360px; background:#121212; color:#fff; border:1px solid #ffffff22; border-radius:12px; padding:12px 14px; box-shadow:0 8px 30px rgba(0,0,0,.35); text-align:left; }
    .toast.success{ border-color:#1dbf7333; }
    .toast.error{ border-color:#ff4d4f33; }
    .toast .t-title{ font-weight:700; margin-bottom:4px; font-size:14px; }
    .toast .t-msg{ font-size:13px; opacity:.9; }

    @media (max-width:600px){
      h1{ font-size:40px; }
      p{ font-size:18px; }
      .buttons a, .buttons button{ font-size:16px; padding:12px 20px; }
      .toast-wrap{ right:12px; bottom:12px; }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <div class="container" role="main">
      <h1>BGB Token</h1>
      <p>üéÅ –ü–æ–ª—É—á–∏ <strong>300 BGB</strong> –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –Ω–∞ —Å–≤–æ–π –∫–æ—à–µ–ª—ë–∫</p>

      <div class="buttons" aria-label="–û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è">
        <a href="https://bscscan.com/token/0xFeF80dbC16251862b82286864D77aFA08ECBcb5C" target="_blank" rel="noopener noreferrer">üìÑ BSC Scan</a>
        <a href="https://t.me/Makkan1985" target="_blank" rel="noopener noreferrer">üí¨ Telegram</a>
        <button type="button" onclick="handleMetaMask(event)">ü¶ä MetaMask</button>
        <button type="button" onclick="handleTrust(event)">üîì Trust Wallet</button>
        <button type="button" onclick="openAddLiquidity(event)">üíß Add Liquidity</button>
        <button type="button" onclick="openBuyPancake(event)">üõí Buy on PancakeSwap</button>
        <button type="button" onclick="openHescoTerminal(event)">üöÄ HESCO Terminal</button>
      </div>

      <div class="contract" aria-live="polite">
        <span>–ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ç–æ–∫–µ–Ω–∞:</span>
        <code id="token-address">0xFeF80dbC16251862b82286864D77aFA08ECBcb5C</code>
        <button type="button" onclick="copyAddress()" title="–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å">üìã Copy</button>
      </div>

      <!-- –¢–∞–π–º–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤—Ä–µ–º—è –±–µ—Ä—ë–º –∏–∑ –±–ª–æ–∫–∞ –ø–æ Tx hash) -->
      <div class="lock-info">
        üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ <strong>14 300 BGB</strong> –Ω–∞ 3 –≥–æ–¥–∞<br/>
        –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: <span id="lock-start">–∑–∞–≥—Ä—É–∑–∫–∞‚Ä¶</span> UTC
        <div class="timer" id="countdown">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–º–µ—Ä–∞‚Ä¶</div>
        <div class="hint" id="lock-hint"></div>
      </div>

      <footer>¬© 2025 BGB Token. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>
    </div>
  </div>

  <!-- Ethers –¥–ª—è —á—Ç–µ–Ω–∏—è –±–ª–æ–∫–∞ -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js" crossorigin="anonymous"></script>

  <script>
    // === –ü—Ä–æ—Å—Ç—ã–µ —Ç–æ—Å—Ç—ã –≤–º–µ—Å—Ç–æ alert ===
    const toastWrap = document.createElement('div'); toastWrap.className = 'toast-wrap'; document.body.appendChild(toastWrap);
    function notify(type = 'success', title = '–ì–æ—Ç–æ–≤–æ', msg = ''){
      const el = document.createElement('div'); el.className = `toast ${type}`;
      el.innerHTML = `<div class="t-title">${title}</div><div class="t-msg">${msg}</div>`;
      toastWrap.appendChild(el);
      setTimeout(()=>{ el.style.opacity = '0'; el.style.transform = 'translateY(6px)'; }, 3600);
      setTimeout(()=>el.remove(), 4200);
    }

    const TOKEN = {
      address: '0xFeF80dbC16251862b82286864D77aFA08ECBcb5C',
      symbol: 'BGB',
      decimals: 18,
      image: 'https://buzizima1985.github.io/bgbtoken.github.io/logo.png'
    };

    const HESCO_URL = 'https://www.geckoterminal.com/ru/bsc/pools/0x5d498d6a3a36187e4c22c5628b0fbeb068fe405a'; // TODO: –≤—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ HESCO Terminal –¥–ª—è –ø–æ–∫—É–ø–∫–∏ —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ‚Äî –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)

    const BSC_PARAMS = {
      chainId: '0x38', // 56
      chainName: 'BNB Smart Chain',
      nativeCurrency: { name:'BNB', symbol:'BNB', decimals:18 },
      rpcUrls: [
        'https://bsc-dataseed.binance.org/',
        'https://bsc-dataseed1.binance.org/',
        'https://bsc-dataseed2.binance.org/',
        'https://bsc-dataseed3.binance.org/'
      ],
      blockExplorerUrls: ['https://bscscan.com']
    };

    // ===== –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ =====
    async function copyAddress(){
      try{
        await navigator.clipboard.writeText(TOKEN.address);
        notify('success','–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ','–ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ –±—É—Ñ–µ—Ä–µ –æ–±–º–µ–Ω–∞.');
      }catch(e){
        notify('error','–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å','–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Ä—É—á–Ω—É—é: '+TOKEN.address);
      }
    }

    // ===== MetaMask: –¥–æ–±–∞–≤–∏—Ç—å BSC –∏ —Ç–æ–∫–µ–Ω =====
    async function handleMetaMask(e){
      e?.preventDefault?.();
      const eth = window.ethereum;
      if(!eth || !eth.request){
        window.open('https://metamask.io/download/','_blank','noopener,noreferrer');
        notify('error','MetaMask –Ω–µ –Ω–∞–π–¥–µ–Ω','–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ.');
        return;
      }
      try{
        // –ü—ã—Ç–∞–µ–º—Å—è –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ BSC
        try{ await eth.request({ method:'wallet_switchEthereumChain', params:[{ chainId:BSC_PARAMS.chainId }] }); }
        catch(switchErr){
          if(switchErr?.code === 4902){ // —Å–µ—Ç–∏ –Ω–µ—Ç ‚Äî –¥–æ–±–∞–≤–∏–º
            await eth.request({ method:'wallet_addEthereumChain', params:[BSC_PARAMS] });
          }else{ throw switchErr; }
        }
        // –î–æ–±–∞–≤–ª—è–µ–º —Ç–æ–∫–µ–Ω –≤ –∫–æ—à–µ–ª—ë–∫
        const added = await eth.request({ method:'wallet_watchAsset', params:{ type:'ERC20', options:TOKEN } });
        if(added){ notify('success','–¢–æ–∫–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω','BGB —Ç–µ–ø–µ—Ä—å –≤–∏–¥–µ–Ω –≤ –≤–∞—à–µ–º MetaMask.'); }
        else { notify('error','–û—Ç–∫–ª–æ–Ω–µ–Ω–æ','–í—ã –æ—Ç–º–µ–Ω–∏–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞.'); }
      }catch(err){
        console.error(err);
        notify('error','–û—à–∏–±–∫–∞ MetaMask', String(err?.message||err));
      }
    }

    // ===== Trust Wallet: –æ—Ç–∫—Ä—ã—Ç—å DApp –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫—É =====
    function handleTrust(e){
      e?.preventDefault?.();
      const ua = navigator.userAgent || '';
      const isAndroid = /Android/i.test(ua);
      const isIOS     = /iPhone|iPad|iPod/i.test(ua);
      const dappUrl = encodeURIComponent(location.href);
      const trustOpen = `https://link.trustwallet.com/open_url?source=dapp&url=${dappUrl}`;

      if (isAndroid) {
        location.href = trustOpen;
        setTimeout(() => {
          window.open('https://play.google.com/store/apps/details?id=com.wallet.crypto.trustapp','_blank','noopener,noreferrer');
        }, 1200);
        return;
      }

      if (isIOS) {
        window.open('https://apps.apple.com/app/trust-crypto-bitcoin-wallet/id1288339409','_blank','noopener,noreferrer');
        notify('success','iOS –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è','–û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Trust Wallet (–≤–∫–ª–∞–¥–∫–∞ Browser/WalletConnect).');
        return;
      }

      window.open('https://trustwallet.com/download','_blank','noopener,noreferrer');
      notify('success','Desktop','–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Trust Wallet –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.');
    }

    // ===== –ö–Ω–æ–ø–∫–∞ Add Liquidity (PancakeSwap) =====
    function openAddLiquidity(e){
      e?.preventDefault?.();
      const addV3 = 'https://pancakeswap.finance/add/BNB/0xFeF80dbC16251862b82286864D77aFA08ECBcb5C?chain=bsc';
      const addV2 = 'https://pancakeswap.finance/v2/add/BNB/0xFeF80dbC16251862b82286864D77aFA08ECBcb5C?chain=bsc&persistChain=1';
      const v3 = window.open(addV3, '_blank','noopener,noreferrer');
      setTimeout(() => { if(v3) window.open(addV2, '_blank','noopener,noreferrer'); }, 350);
    }

    // ===== –ö–Ω–æ–ø–∫–∞ Buy –Ω–∞ PancakeSwap =====
    function openBuyPancake(e){
      e?.preventDefault?.();
      const base = 'https://pancakeswap.finance/swap?chain=bsc&outputCurrency=' + encodeURIComponent(TOKEN.address);
      const fallback = 'https://pancakeswap.finance/v2/swap?chain=bsc&outputCurrency=' + encodeURIComponent(TOKEN.address);
      const w = window.open(base, '_blank', 'noopener,noreferrer');
      setTimeout(()=>{ if(w) window.open(fallback, '_blank', 'noopener,noreferrer'); }, 350);
    }

    // ===== –ö–Ω–æ–ø–∫–∞ HESCO Terminal =====
    function openHescoTerminal(e){
      e?.preventDefault?.();
      if(!HESCO_URL){
        notify('error','HESCO URL –Ω–µ –∑–∞–¥–∞–Ω','–£–∫–∞–∂–∏—Ç–µ —Å—Å—ã–ª–∫—É –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–µ HESCO_URL –≤ –∫–æ–¥–µ.');
        return;
      }
      window.open(HESCO_URL, '_blank','noopener,noreferrer');
    }

    // ======= –ê–í–¢–û-–¢–ê–ô–ú–ï–† –ò–ó –ë–õ–û–ö–ê =======
    (function(){
      const LOCK_TX_HASH = '0xabd8b15bebce8b05ee64dbd876fb8b30f870e237aae78f181e367a1b9e9ea5';
      const LOCK_YEARS = 3;
      const RPCS = [
        'https://bsc-dataseed.binance.org/',
        'https://bsc-dataseed1.binance.org/',
        'https://bsc-dataseed2.binance.org/',
        'https://bsc-dataseed3.binance.org/'
      ];

      const $ = id => document.getElementById(id);
      const pad2 = n => String(n).padStart(2,'0');
      const fmtUTC = ts => {
        const d = new Date(ts);
        return `${pad2(d.getUTCDate())}.${pad2(d.getUTCMonth()+1)}.${d.getUTCFullYear()} `+
               `${pad2(d.getUTCHours())}:${pad2(d.getUTCMinutes())}:${pad2(d.getUTCSeconds())}`;
      };

      const CACHE_KEY = 'bgb_lock_start_ms_v1';

      async function fetchStartMs(){
        try{
          const raw = localStorage.getItem(CACHE_KEY);
          if(raw){
            try{
              const cached = JSON.parse(raw);
              if (cached && (Date.now() - cached.savedAt) < 24*3600*1000) return cached.startMs;
            }catch{ /* ignore parse error */ }
          }
        }catch{ /* ignore storage error */ }

        let lastErr;
        for (const url of RPCS){
          try{
            const provider = new ethers.JsonRpcProvider(url, { staticNetwork: { chainId:56 } });
            await provider.getBlockNumber();
            const rcpt = await provider.getTransactionReceipt(LOCK_TX_HASH);
            if (!rcpt) throw new Error('Receipt not found');
            const block = await provider.getBlock(rcpt.blockNumber);
            if (!block) throw new Error('Block not found');
            const startMs = Number(block.timestamp) * 1000;
            try{ localStorage.setItem(CACHE_KEY, JSON.stringify({ startMs, savedAt: Date.now() })); }catch{}
            return startMs;
          }catch(e){ lastErr = e; }
        }
        throw lastErr || new Error('RPC unavailable');
      }

      function runCountdown(unlockTs){
        const el = $('countdown');
        function render(){
          const diff = unlockTs - Date.now();
          if (diff <= 0){ el.textContent = '‚è≥ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞'; return; }
          const sec = Math.floor(diff / 1000);
          const d = Math.floor(sec / 86400);
          const h = Math.floor((sec % 86400) / 3600);
          const m = Math.floor((sec % 3600) / 60);
          const s = sec % 60;
          el.textContent = `${d}–¥ ${pad2(h)}—á ${pad2(m)}–º ${pad2(s)}—Å`;
        }
        let id; const start = () => { clearInterval(id); render(); id = setInterval(render, 1000); };
        document.addEventListener('visibilitychange', () => { if (!document.hidden) start(); }, { passive:true });
        start();
      }

      (async () => {
        try{
          $('lock-hint').textContent = '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º BSC‚Ä¶';
          const startMs = await fetchStartMs();
          $('lock-start').textContent = fmtUTC(startMs);

          const end = new Date(startMs);
          end.setUTCFullYear(end.getUTCFullYear() + LOCK_YEARS);
          const unlockTs = end.getTime();

          $('lock-hint').textContent = '';
          runCountdown(unlockTs);
        }catch(e){
          console.error(e);
          $('lock-hint').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (RPC –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω). –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∑–∂–µ.';
          $('countdown').textContent = '‚Äî';
        }
      })();
    })();
  </script>
</body>
</html>
