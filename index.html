<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>BGB Token ‚Ä¢ Mining</title>
<link rel="icon" href="logo.png"/>
...
  <script>
  (function(){
    // --- –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
    const GENESIS_PREV='0xf49bd1cb89367c32e3e3814b66ce02a181043f63f9af3dc1e9b5686faf15742d';
    const UNIT=300n*10n**18n;           // üî• —Ç–µ–ø–µ—Ä—å 300 BGB –¥–ª—è –≤—ã–ø–ª–∞—Ç—ã
    const BASE_RATE=5n*10n**16n;        
    const BLOCK_TARGET_TIME=10;         
    const RETARGET_INTERVAL=20;         
    const TRIES=128;                    
    const MAX_VIEW=200;                 
    const LOG_MAX=400;                  
...
    // --- Claim
    window.smRequest = async function(){
      if(st.accrued<UNIT){ alert('–ù—É–∂–Ω–æ ‚â•300 BGB'); return; } // üî• –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ 300
      const injected=(window.__bgb_provider||window.ethereum); if(!injected){ alert('–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫'); return; }
      try{
        if(injected.request){ await injected.request({ method:'eth_requestAccounts' }); }
        const p=new ethers.BrowserProvider(injected), s=await p.getSigner(), addr=await s.getAddress();
        const payoutWei=st.accrued-(st.accrued%UNIT), amountBGB=fmt(payoutWei,4), last=st.chain.at(-1);
        const payload={address:addr,session:st.session,amountBGB,amountWei:payoutWei.toString(),height:st.height,lastBlock:last?last.hash:null,bits:st.bits,ts:new Date().toISOString()};
        const msg=`BGB Claim Request\nAddress: ${addr}\nSession: ${st.session}\nAmount: ${amountBGB} BGB\nHeight: ${st.height}\nBits: 0x${st.bits.toString(16)}\nLast: ${last?last.hash:'-'}\nTime: ${payload.ts}`;
        const sig=await s.signMessage(msg);
        const claim={...payload,signature:sig,message:msg};
        const modal=$('claim-modal'), pre=$('claim-json');
        if(modal&&pre){ pre.textContent=JSON.stringify(claim,null,2); modal.style.display='flex'; }
        else{ try{ await navigator.clipboard.writeText(JSON.stringify(claim,null,2)); }catch{} const share=`https://t.me/share/url?url=&text=${encodeURIComponent(msg+'\n\nSignature: '+sig)}`; window.open(share,'_blank','noopener,noreferrer'); }
      }catch(e){ console.error(e); alert('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞'); }
    };
...
  })();
  </script>
</body>
</html>
