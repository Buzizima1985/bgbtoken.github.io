<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BGB Token ‚Ä¢ Mining</title>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#0a0a0a; color:#fff; }
    header { text-align:center; padding:20px 10px; }
    header h1 { font-size:42px; color:#ff6600; margin:0; }
    header p { font-size:18px; margin:5px 0 15px; }

    .buttons { display:flex; flex-wrap:wrap; justify-content:center; margin-bottom:20px; }
    .buttons a, .buttons button {
      margin:6px; padding:10px 20px; font-size:16px; font-weight:bold;
      border:none; border-radius:8px; background:#d00; color:#fff; cursor:pointer;
      text-decoration:none; box-shadow:0 0 8px #d00;
    }
    .buttons a:hover, .buttons button:hover { background:#f33; }

    .card {
      background:#111; border-radius:12px; max-width:800px; margin:0 auto; padding:20px;
      box-shadow:0 0 15px rgba(255,0,0,0.3);
    }
    h2 { margin-top:0; }

    .stats { font-size:14px; margin-bottom:10px; }
    .stats span { display:inline-block; margin-right:15px; }

    .progress {
      height:10px; background:#333; border-radius:6px; margin:8px 0 14px; overflow:hidden;
    }
    .progress div { height:100%; width:0%; background:#00ff66; transition:width .3s; }

    #log {
      background:#000; color:#fff; padding:10px; height:240px;
      border-radius:6px; overflow-y:scroll; font-size:12px; line-height:1.4;
    }
    .try { color:#ccc; }
    .ok { color:#0f0; font-weight:bold; }

    footer { text-align:center; margin:25px 0; font-size:12px; color:#aaa; }
  </style>
</head>
<body>
  <header>
    <h1>BGB Token</h1>
    <p>üéÅ –ü–æ–ª—É—á–∏ <b>300 BGB</b> –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –≤ –±—Ä–∞—É–∑–µ—Ä–µ ‚õè</p>
    <div class="buttons">
      <a href="https://bscscan.com/token/0xFeF80dbC16251862b82286864D77aFA08ECBcb5C" target="_blank">üìÑ BSC Scan</a>
      <a href="https://t.me/Makkan1985" target="_blank">üí¨ Telegram</a>
      <button onclick="connectWallet()">ü¶ä MetaMask / Trust</button>
      <a href="https://pancakeswap.finance/swap?outputCurrency=0xFeF80dbC16251862b82286864D77aFA08ECBcb5C" target="_blank">üõí Buy on PancakeSwap</a>
      <a href="https://www.geckoterminal.com/ru/bsc/pools/0x5d498d6a3a36187e4c22c5628b0fbeb068fe405a" target="_blank">ü¶é GeckoTerminal</a>
    </div>
  </header>

  <div class="card">
    <h2>BGB Mining</h2>
    <div class="stats" id="stats"></div>
    <div>Accrued: <b id="accrued">0.0000 BGB</b></div>
    <div class="progress"><div id="progress"></div></div>
    <div id="status">Status: ready</div>
    <div class="buttons">
      <button onclick="startMining()">Start</button>
      <button onclick="stopMining()">Stop</button>
      <button onclick="requestPayout()">Request Payout (‚â•300 BGB)</button>
      <button onclick="showChain()">Chain</button>
    </div>
    <pre id="log"></pre>
  </div>

  <footer>¬© 2025 BGB Token. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>

<script>
const TOKEN = "0xFeF80dbC16251862b82286864D77aFA08ECBcb5C";
const BLOCK_REWARD = 1n * 10n**18n; // 1 BGB
const PAYOUT_LIMIT = 300n * 10n**18n; // 300 BGB
let mining = false, wallet=null, acc=0n, height=0, chain=[];
let seenHashes=new Set();

// localStorage recovery
(function(){
  try{
    const d=JSON.parse(localStorage.getItem("bgb_miner")||"{}");
    if(d.wallet) wallet=d.wallet;
    if(d.acc) acc=BigInt(d.acc);
    if(d.height) height=d.height;
    if(d.chain) chain=d.chain;
    if(d.seen) seenHashes=new Set(d.seen);
    updateUI();
  }catch(e){}
})();

function save(){
  localStorage.setItem("bgb_miner",JSON.stringify({wallet,acc:String(acc),height,chain,seen:[...seenHashes]}));
}

function connectWallet(){
  if(window.ethereum){
    ethereum.request({method:"eth_requestAccounts"}).then(accs=>{
      wallet=accs[0]; save(); updateUI();
    });
  } else { alert("–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ MetaMask –∏–ª–∏ TrustWallet"); }
}

function updateUI(){
  document.getElementById("accrued").textContent=(Number(acc)/1e18).toFixed(4)+" BGB";
  document.getElementById("progress").style.width=Math.min(100,Number(acc*100n/PAYOUT_LIMIT))+"%";
  document.getElementById("stats").innerHTML=`Wallet: ${wallet?wallet.slice(0,6)+"..."+wallet.slice(-4):"‚Äî"} 
  ‚Ä¢ Height: ${height} ‚Ä¢ Active miners: ${localStorage.length}`;
}

function pushLog(txt,ok=false){
  const log=document.getElementById("log");
  const line=document.createElement("div");
  line.className=ok?"ok":"try";
  line.textContent=txt;
  log.appendChild(line);
  log.scrollTop=log.scrollHeight;
}

function hashDummy(data){
  return "0x"+btoa(data).padEnd(64,"0").slice(0,64);
}

function mine(){
  if(!mining) return;
  const nonce=Math.floor(Math.random()*1e9);
  const salt=Math.floor(Math.random()*1e9);
  const h=hashDummy(wallet+height+nonce+salt);
  if(seenHashes.has(h)) { setTimeout(mine,50); return; }
  seenHashes.add(h);
  if(Math.random()<0.05){ // —É—Å–ø–µ—Ö 5%
    height++;
    acc+=BLOCK_REWARD;
    chain.push({h,idx:height,time:Date.now()});
    pushLog("‚úî Accepted block: "+h,true);
    document.getElementById("status").textContent="Mined block #"+height;
    save(); updateUI();
  } else {
    pushLog("Hash tried: "+h,false);
  }
  setTimeout(mine,50);
}

function startMining(){
  if(!wallet){ alert("–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫!"); return; }
  mining=true; document.getElementById("status").textContent="Mining...";
  mine();
}

function stopMining(){ mining=false; document.getElementById("status").textContent="Paused"; }

function requestPayout(){
  if(acc<PAYOUT_LIMIT){ alert("–ù—É–∂–Ω–æ –º–∏–Ω–∏–º—É–º 300 BGB –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –≤—ã–ø–ª–∞—Ç—ã!"); return; }
  const payload={
    address:wallet, amountBGB:(Number(acc)/1e18).toFixed(3),
    height, ts:new Date().toISOString(), chain:chain.slice(-10)
  };
  const txt=JSON.stringify(payload,null,2);
  alert("–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∞–¥–º–∏–Ω—É –≤ Telegram:\n\n"+txt);
}

function showChain(){ alert("Blocks mined: "+height); }
</script>
</body>
</html>
