<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BGB Token Airdrop</title>
  <link rel="icon" href="logo.png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }

    body, html {
      height:100%;
      font-family:'Orbitron', sans-serif;
      background:url('photo_2_2025-08-05_23-57-02.jpg') no-repeat center center fixed;
      background-size:cover;
    }

    .overlay{
      background-color:rgba(0,0,0,0.75);
      height:100%; width:100%;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      text-align:center; padding:30px;
    }

    h1{
      font-size:64px;
      background:linear-gradient(to right, red, orange);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      margin-bottom:20px;
    }

    p{ font-size:24px; color:#fff; margin-bottom:30px; }

    .buttons a{
      text-decoration:none; display:inline-block; margin:10px; padding:15px 28px;
      background:#e60000; border-radius:10px; color:#fff; font-weight:bold; font-size:18px;
      box-shadow:0 0 10px #e60000; transition:.3s ease-in-out;
    }
    .buttons a:hover{ background:#cc0000; transform:scale(1.05); }

    .contract{
      background:rgba(255,255,255,.15); color:#fff; margin-top:30px; padding:15px 20px;
      border-radius:10px; font-size:16px;
    }

    .lock-info{
      margin-top:25px; padding:15px 20px; background:rgba(255,215,0,.15);
      border-radius:10px; color:#FFD700; font-size:18px;
    }
    .timer{ font-size:22px; font-weight:700; color:#00ff88; margin-top:10px; }

    .hint { margin-top:6px; font-size:12px; color:#9aa0a6; }

    footer{ margin-top:30px; color:#aaa; font-size:14px; }

    @media (max-width:600px){
      h1{ font-size:40px; }
      p{ font-size:18px; }
      .buttons a{ font-size:16px; padding:12px 20px; }
    }
  </style>
</head>
<body>
  <div class="overlay">
    <h1>BGB Token</h1>
    <p>üéÅ –ü–æ–ª—É—á–∏ <strong>300 BGB</strong> –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å –Ω–∞ —Å–≤–æ–π –∫–æ—à–µ–ª—ë–∫</p>

    <div class="buttons">
      <a href="https://bscscan.com/token/0xFeF80dbC16251862b82286864D77aFA08ECBcb5C" target="_blank">üìÑ BSC Scan</a>
      <a href="https://t.me/Makkan1985" target="_blank">üí¨ Telegram</a>
      <a href="#" onclick="addToMetaMask()">ü¶ä MetaMask</a>
      <a href="trust://browser_enable" target="_blank">üîì TrustWallet</a>
    </div>

    <div class="contract">
      –ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ç–æ–∫–µ–Ω–∞:<br>
      <code>0xFeF80dbC16251862b82286864D77aFA08ECBcb5C</code>
    </div>

    <!-- –¢–∞–π–º–µ—Ä –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (–≤—Ä–µ–º—è –±–µ—Ä—ë–º –∏–∑ –±–ª–æ–∫–∞ –ø–æ Tx hash) -->
    <div class="lock-info">
      üîí –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ <strong>14 300 BGB</strong> –Ω–∞ 3 –≥–æ–¥–∞<br>
      –î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏: <span id="lock-start">–∑–∞–≥—Ä—É–∑–∫–∞‚Ä¶</span> UTC
      <div class="timer" id="countdown">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞–π–º–µ—Ä–∞‚Ä¶</div>
      <div class="hint" id="lock-hint"></div>
    </div>

    <footer>¬© 2025 BGB Token. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</footer>
  </div>

  <!-- Ethers –¥–ª—è —á—Ç–µ–Ω–∏—è –±–ª–æ–∫–∞ -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.11.1/dist/ethers.umd.min.js"></script>

  <script>
    async function addToMetaMask() {
      try {
        await window.ethereum?.request({
          method: 'wallet_watchAsset',
          params: {
            type: 'ERC20',
            options: {
              address: '0xFeF80dbC16251862b82286864D77aFA08ECBcb5C',
              symbol: 'BGB',
              decimals: 18,
              image: 'https://buzizima1985.github.io/bgbtoken.github.io/logo.png'
            }
          }
        });
      } catch (e) { alert('MetaMask –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω –∏–ª–∏ –æ—Ç–∫–∞–∑–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.'); }
    }

    // ======= –ê–í–¢–û-–¢–ê–ú–ï–† –ò–ó –ë–õ–û–ö–ê =======
    (function(){
      // Tx hash —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ¬´lock¬ª (—Å–æ —Å–∫—Ä–∏–Ω–∞ BscScan)
      const LOCK_TX_HASH = '0xabd8b15bebce8b05ee64dbd876fb8b30f870e237aae78f181e367a1b9e9ea5';
      const LOCK_YEARS = 3;
      const RPCS = [
        'https://bsc-dataseed.binance.org/',
        'https://bsc-dataseed1.binance.org/',
        'https://bsc-dataseed2.binance.org/'
      ];

      const $ = id => document.getElementById(id);
      const pad2 = n => String(n).padStart(2,'0');
      const fmtUTC = ts => {
        const d = new Date(ts);
        return `${pad2(d.getUTCDate())}.${pad2(d.getUTCMonth()+1)}.${d.getUTCFullYear()} ${pad2(d.getUTCHours())}:${pad2(d.getUTCMinutes())}:${pad2(d.getUTCSeconds())}`;
      };

      // –ö–µ—à–∏—Ä—É–µ–º timestamp, —á—Ç–æ–±—ã –Ω–µ –¥—ë—Ä–≥–∞—Ç—å RPC –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞—Ö–æ–¥–µ
      const CACHE_KEY = 'bgb_lock_start_ms_v1';

      async function fetchStartMs() {
        // 1) –∏–∑ –∫–µ—à–∞ (–µ—Å–ª–∏ –º–æ–ª–æ–∂–µ —Å—É—Ç–æ–∫)
        try {
          const cached = JSON.parse(localStorage.getItem(CACHE_KEY) || 'null');
          if (cached && (Date.now() - cached.savedAt) < 24*3600*1000) return cached.startMs;
        } catch {}

        // 2) —Å RPC (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫)
        let lastErr;
        for (const url of RPCS) {
          try {
            const provider = new ethers.JsonRpcProvider(url, { staticNetwork: { chainId: 56 } });
            const rcpt = await provider.getTransactionReceipt(LOCK_TX_HASH);
            if (!rcpt) throw new Error('Receipt not found');
            const block = await provider.getBlock(rcpt.blockNumber);
            if (!block) throw new Error('Block not found');
            const startMs = Number(block.timestamp) * 1000;
            localStorage.setItem(CACHE_KEY, JSON.stringify({ startMs, savedAt: Date.now() }));
            return startMs;
          } catch (e) { lastErr = e; }
        }
        throw lastErr || new Error('RPC unavailable');
      }

      function runCountdown(unlockTs) {
        const el = $('countdown');
        function render() {
          const diff = unlockTs - Date.now();
          if (diff <= 0) { el.textContent = '‚è≥ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞'; return; }
          const sec = Math.floor(diff / 1000);
          const d = Math.floor(sec / 86400);
          const h = Math.floor((sec % 86400) / 3600);
          const m = Math.floor((sec % 3600) / 60);
          const s = sec % 60;
          el.textContent = `${d}–¥ ${pad2(h)}—á ${pad2(m)}–º ${pad2(s)}—Å`;
        }
        let id; const start = () => { clearInterval(id); render(); id = setInterval(render, 1000); };
        document.addEventListener('visibilitychange', () => { if (!document.hidden) start(); });
        start();
      }

      (async () => {
        try {
          $('lock-hint').textContent = '–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–ª–æ–∫—á–µ–π–Ω–æ–º BSC‚Ä¶';
          const startMs = await fetchStartMs();               // —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∞–ª–æ (UTC)
          $('lock-start').textContent = fmtUTC(startMs);

          const end = new Date(startMs);
          end.setUTCFullYear(end.getUTCFullYear() + LOCK_YEARS);
          const unlockTs = end.getTime();

          $('lock-hint').textContent = ''; // —É–±–∏—Ä–∞–µ–º –ø–æ–¥–ø–∏—Å—å –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä—ã
          runCountdown(unlockTs);
        } catch (e) {
          console.error(e);
          $('lock-hint').textContent = '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≤—Ä–µ–º—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (RPC –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω). –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∑–∂–µ.';
          $('countdown').textContent = '‚Äî';
        }
      })();
    })();
  </script>
</body>
</html>

